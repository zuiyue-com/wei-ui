/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-10-16 10:23:30
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[9822],{24025:function(e,t,a){a.d(t,{BB:function(){return o},BN:function(){return i},N7:function(){return y},NY:function(){return c},PM:function(){return g},Xq:function(){return d},Z0:function(){return m},kA:function(){return l},l0:function(){return p},mE:function(){return f},wR:function(){return u},xS:function(){return w},yX:function(){return n},yo:function(){return h}});var s=a(52806),r=a(12688);function n(){return(0,s.Z)({url:"/wwwapi.php?to=sd&modac=tags",method:"get"})}function o(e){return(0,s.Z)({url:"/wwwapi.php?to=postSd&filter=heat&orderby=heats",method:"get",params:e})}function i(e){return(0,s.Z)({url:"/wwwapi.php?to=postSdView&extra=",method:"get",params:e})}function u(e){return(0,s.Z)({url:"/wwwapi.php?to=postSdOfUser",method:"get",params:e})}async function c(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postReply",method:"post",data:{file:"",subject:"",usesig:"1",replysubmit:"yes",formhash:t,tid:e.tid,message:e.message}})}async function l(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postReply",method:"post",data:{subject:"",usesig:"1",replysubmit:"yes",formhash:t,...e}})}async function m(e){const{body:{hash:t}}=await(0,r.Gv)();return e.formhash=t,(0,s.Z)({url:"/wwwapi.php?to=postDel",method:"post",data:e})}async function p(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postFavAdd",method:"get",params:{id:e,formhash:t}})}async function d(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}function g(e){return(0,s.Z)({url:"/wwwapi.php?to=postFavlist",method:"get",params:e})}async function f(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postLikes",method:"get",params:{tid:e,hash:t}})}async function h(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=postReport",method:"post",data:{referer:"",reportsubmit:"true",rtype:"post",url:"",inajax:"1",handlekey:`miscreport${e.rid}`,formhash:t,...e}})}async function w(e){const t={...e};t.tags=t.tags.join(",");const{body:{hash:a}}=await(0,r.Gv)();return(0,s.Z)({url:"/wwwapi.php?to=sd&modac=sharePrepare",method:"post",data:{formhash:a,...t}})}async function y(e){return(0,s.Z)({url:"/wwwapi.php?to=sdpost",method:"post",data:e})}},40645:function(e,t,a){a.d(t,{s:function(){return o}});var s=a(95244),r=a(92327),n=a(47720);const o=(0,n.Q_)("imageResult",{state:()=>({tasks:[],queryForm:{page:1},pagination:{pageSize:1,total:1}}),getters:{getTasks(){return this.tasks.map((e=>{const t={...e},a=e.imagelist.map((e=>(e.checked=!1,e)));t.imagelist=a;const s=e.imagelist.map((e=>e.bigimg));return t.images=s,t.collapse=["1"],t.expired_at=`${(0,r.E)(1e3*(parseInt(t.ms_createTime)+5184e3))}过期`,t.created_at=(0,r.p)(1e3*t.ms_createTime),t}))},getTasksImages(){return this.getTasks.map((e=>e.imagelist)).flat()},getTasksCheckedImages(){return this.getTasksImages.filter((e=>e.checked))}},actions:{async load(){const{body:{list:e,page_perpage:t,page_allcount:a}}=await(0,s.ss)(this.queryForm);this.tasks=[...e],this.pagination.pageSize=parseInt(t),this.pagination.total=parseInt(a)},async loadMore(){this.queryForm.page++,this.load()},resetImagesCheck(){this.getTasksCheckedImages.forEach((e=>e.checked=!1))}}})},92327:function(e,t,a){a.d(t,{E:function(){return i},p:function(){return u}});var s=a(27484),r=a.n(s),n=(a(33852),a(84110)),o=a.n(n);function i(e){return r().locale("zh-cn"),r()(e).fromNow()}function u(e,t="YYYY-MM-DD HH:mm:ss"){return r()(e).format(t)}r().extend(o())},29431:function(e,t,a){a.d(t,{Nb:function(){return n},jQ:function(){return s},jl:function(){return r}});const s={message:[{required:!0,message:"评论内容必填",trigger:"blur"},{min:10,message:"帖子长度必须大于10个字符",trigger:"blur"},{max:255,message:"帖子长度超过255个字符",trigger:"blur"}]},r={report_select:[{required:!0,message:"请选择举报类型",trigger:"blur"}],message:[{required:!0,message:"举报内容必填",trigger:"blur"},{min:8,max:255,message:"举报内容长度必须在8-255个字符",trigger:"blur"}]},n={images:[{required:!0,message:"发帖需要至少一张图片",trigger:"blur"}],subject:[{required:!0,message:"内容必填",trigger:"blur"}],tags:[{required:!0,message:"至少选择一个标签",trigger:"blur"}]}},49822:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var s=a(73481),r=(a(3241),a(62029),a(20129)),n=(a(69840),a(15659)),o=(a(10444),a(57534)),i=(a(92471),a(57018)),u=(a(74367),a(6589),a(73632)),c=(a(74965),a(22040)),l=(a(99426),a(16273)),m=a(61046),p=(a(19414),a(57658),a(66252)),d=a(2262),g=a(3577),f=a(24025),h=a(40645),w=a(29431),y=a(22201),b=a(47720);const k={class:"share-form-container"},_={class:"lora-draw-card-body"},v={class:"lora-draw-image-group"},x={class:"lora-draw-image"};var Z={__name:"shareform",setup(e,{expose:t}){const a=(0,y.tv)(),Z=(0,p.f3)("$baseMessage"),j=(0,h.s)(),{getTasksCheckedImages:S}=(0,b.Jk)(j),U=(0,d.qj)({form:{images:[],subject:"",tags:[]},dialogFormVisible:!1,tagOptions:[],rules:{...w.Nb},formRef:null}),{dialogFormVisible:q,form:C,tagOptions:W,rules:I,formRef:D}=(0,d.BK)(U);async function F(){const{body:e}=await(0,f.yX)();U.tagOptions=e.map((e=>({name:e,checked:!1})))}function V(e){const t=U.form.tags.findIndex((t=>t===e.name));t>=0||(e.checked=!0,U.form.tags.push(e.name))}async function R(e){const t=U.form.tags.findIndex((t=>t===e));if(t>=0){U.form.tags.splice(t,1);const a=U.tagOptions.find((t=>t.name===e));a&&(a.checked=!1)}}async function T(e){U.dialogFormVisible=!0,U.form.images=e}async function G(){U["formRef"].validate((e=>{e&&Y()}))}async function Y(){const{body:{data:e}}=await(0,f.xS)(U.form),{body:{tid:t}}=await(0,f.N7)(e);Z("发帖成功","success","vab-hey-message-success"),a.push(`/topic/${t}`)}return(0,p.bv)((()=>{F()})),t({showDialog:T}),(e,t)=>{const a=m.F8,f=l.Z,h=c.Dv,w=u.dq,y=r.nH,b=i.EZ,Z=o.Ks,j=n.ElButton,S=r.ly,U=s.d0;return(0,p.wg)(),(0,p.iD)("div",k,[(0,p.Wm)(U,{modelValue:(0,d.SU)(q),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,d.dq)(q)?q.value=e:null),title:"分享作品"},{default:(0,p.w5)((()=>[(0,p.Wm)(S,{ref_key:"formRef",ref:D,model:(0,d.SU)(C),rules:(0,d.SU)(I),"label-width":"100px"},{default:(0,p.w5)((()=>[(0,p.Wm)(y,{prop:"images"},{default:(0,p.w5)((()=>[(0,p.Wm)(w,{gutter:16,span:"24",justify:"center"},{default:(0,p.w5)((()=>[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)((0,d.SU)(C).images,(e=>((0,p.wg)(),(0,p.j4)(h,{key:e,lg:4,md:4,sm:4,xl:3,xs:12},{default:(0,p.w5)((()=>[(0,p.Wm)(f,{"body-style":{padding:"0px"},shadow:"hover"},{default:(0,p.w5)((()=>[(0,p._)("div",_,[(0,p._)("div",v,[(0,p._)("div",x,[(0,p.Wm)(a,{src:e},null,8,["src"])])])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,p.Wm)(y,{label:"标题",prop:"subject"},{default:(0,p.w5)((()=>[(0,p.Wm)(b,{modelValue:(0,d.SU)(C).subject,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,d.SU)(C).subject=e),placeholder:"请发挥您的创意，大笔挥上贴近您作品的创意标题"},null,8,["modelValue"])])),_:1}),(0,p.Wm)(y,{label:"使用标签",prop:"tags"},{default:(0,p.w5)((()=>[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)((0,d.SU)(C).tags,(e=>((0,p.wg)(),(0,p.j4)(Z,{key:e,closable:"","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px","margin-left":"0"},onClose:t=>R(e)},{default:(0,p.w5)((()=>[(0,p.Uk)((0,g.zw)(e),1)])),_:2},1032,["onClose"])))),128))])),_:1}),(0,p.Wm)(y,{label:"可选标签"},{default:(0,p.w5)((()=>[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)((0,d.SU)(W),(e=>((0,p.wg)(),(0,p.j4)(Z,{key:e.name,type:e.checked?"info":"","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px","margin-left":"0"},class:(0,g.C_)({"cursor-pointer":!e.checked}),onClick:t=>V(e)},{default:(0,p.w5)((()=>[(0,p.Uk)((0,g.zw)(e.name),1)])),_:2},1032,["type","class","onClick"])))),128))])),_:1}),(0,p.Wm)(y,{label:""},{default:(0,p.w5)((()=>[(0,p.Wm)(j,{type:"primary",onClick:G},{default:(0,p.w5)((()=>[(0,p.Uk)(" 发布，欣赏下我的杰作吧 ")])),_:1}),(0,p.Wm)(j,{onClick:t[1]||(t[1]=e=>q.value=!1)},{default:(0,p.w5)((()=>[(0,p.Uk)(" 先不分享，缓缓 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}};function j(e){e.__source="src/views/stablediffusion/components/shareform.vue"}var S=a(83744);"function"===typeof j&&j(Z);const U=(0,S.Z)(Z,[["__scopeId","data-v-6357e1b0"]]);var q=U}}]);