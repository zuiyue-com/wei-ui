/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-10-10 18:16:02
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[9559,7280,2369,8594],{95244:function(e,a,t){t.d(a,{Ix:function(){return n},R1:function(){return s},_5:function(){return l},p$:function(){return r},ss:function(){return d}});var i=t(52806);function s(){return(0,i.Z)({url:"/wwwapi.php?to=sd&modac=formbase",method:"get"})}function r(e){return(0,i.Z)({url:"/wwwapi.php?to=sd&modac=create",method:"post",data:e})}function n(e,a){const t=new FormData;return t.append("Filedata",e.file),(0,i.Z)({url:"/wwwapi.php?to=sd&modac=upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t,...a})}function d(){return{list:[{missinId:1,params:'girl, blue hair, double horsetail, Lolita outfit, lace cake skirt, brown skirt with Little Bear Pattern, bowknot, Negative prompt: (ng_deepnegative_v1_75t:1.2), (badhandv4:1), (worst quality:2), (low quality:2), (normal quality:2), lowres, bad anatomy, bad hands, watermark, moles, toe, bad-picture-chill-75v, realisticvision-negative-embedding Steps: 30, Sampler: DPM++ 2M Karras, CFG scale: 7.0, Seed: 1337168216, Size: 576x1024, Model: JGP3.0剪: 3ddf8e6bc625", TI hashes: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v", Version: v1.6.0.8-v3-2-g9930b53, TaskID: 641772120954850926 Used Embeddings: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v, ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v"',images:[{picid:1,url:"http://120.232.127.22/sd/forum/threadcover/d6/7d/39.jpg"},{picid:2,url:"http://120.232.127.22/sd/lora/BallpointPainting_v1.0.jpg"}],created_at:"2023-10-10 09:20:12",expired_at:"2023-11-10 00:00:00",percentage:100},{missinId:2,params:'girl, blue hair, double horsetail, Lolita outfit, lace cake skirt, brown skirt with Little Bear Pattern, bowknot, Negative prompt: (ng_deepnegative_v1_75t:1.2), (badhandv4:1), (worst quality:2), (low quality:2), (normal quality:2), lowres, bad anatomy, bad hands, watermark, moles, toe, bad-picture-chill-75v, realisticvision-negative-embedding Steps: 30, Sampler: DPM++ 2M Karras, CFG scale: 7.0, Seed: 1337168216, Size: 576x1024, Model: JGP3.0剪: 3ddf8e6bc625", TI hashes: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v", Version: v1.6.0.8-v3-2-g9930b53, TaskID: 641772120954850926 Used Embeddings: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v, ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v"',images:[],created_at:"2023-10-10 09:20:12",expired_at:"2023-11-10 00:00:00",percentage:70},{missinId:3,params:'girl, blue hair, double horsetail, Lolita outfit, lace cake skirt, brown skirt with Little Bear Pattern, bowknot, Negative prompt: (ng_deepnegative_v1_75t:1.2), (badhandv4:1), (worst quality:2), (low quality:2), (normal quality:2), lowres, bad anatomy, bad hands, watermark, moles, toe, bad-picture-chill-75v, realisticvision-negative-embedding Steps: 30, Sampler: DPM++ 2M Karras, CFG scale: 7.0, Seed: 1337168216, Size: 576x1024, Model: JGP3.0剪: 3ddf8e6bc625", TI hashes: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v", Version: v1.6.0.8-v3-2-g9930b53, TaskID: 641772120954850926 Used Embeddings: "ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v, ng_deepnegative_v1_75t, badhandv4, bad-picture-chill-75v"',images:[{picid:3,url:"http://120.232.127.22/sd/lora/Lovers_Avatar_v2.png"},{picid:4,url:"http://120.232.127.22/sd/lora/xuYingTeXiao_v1.0.png"}],created_at:"2023-10-10 09:20:12",expired_at:"2023-11-10 00:00:00",percentage:100}]}}function l(e){return(0,i.Z)({url:"",method:"post",data:{missinId:e}})}},91222:function(e,a,t){t.d(a,{m:function(){return l}});var i=t(95244),s=t(15592),r=t(96486),n=t.n(r),d=t(47720);const l=(0,d.Q_)("imageModel",{state:()=>({formType:"basic",basicFormTemp:{sd_model_checkpoint_name:"",size:"Portrait"},basicForm:{taskType:"txt2img",override_settings:{sd_model_checkpoint:"",sd_vae:""},styles:[],prompt_words:"",negative_prompt_words:"",init_images:[],width:128,height:1536,sampler_index:"",num_samples:0,cfg_scale:0,seed:-1,clip_skip:0,ensd:31337,batch_size:1},basicOptions:{Checkpoints:[],loraStyle:[],sdVae:{},imageSize:{},imageSizeCustom:{},samplerMethod:[],samplerStep:{},CFGScale:{},clipSkip:{}},hdrepaireForm:{taskType:"HD",base_image:{},hr_upscaler:"",hr_scale:"2",hr_resize_x:0,hr_resize_y:0,hr_second_pass_steps:0,denoising_strength:0},hdrepaireOptions:{hrImageSize:{},imageSizeCustom:{},hrUpscaler:{},hrSecondPassSteps:{}},adetailerForm:{taskType:"AD",base_image:{},ad_model:"",styles:[],ad_prompt_words:"",ad_negative_prompt_words:"",ad_confidence:0,ad_dilate_erode:0,ad_denoising_strength:0,ad_inpaint_only_masked:1},adetailerOptions:{adModel:{},loraStyle:[],adConfidence:{},adMaskBlur:{},adDenoisingStrength:{}}}),getters:{isCustomImageSize(e){return"Custom"===e.basicFormTemp.size},isHdrepaireCustomImageSize(e){return"custom"===e.hdrepaireForm.hr_scale},hasUploadedImage(e){return e.basicForm.init_images.length>0}},actions:{setFormType(e){this.formType=e},formatLoraStyle(e){return Object.entries(e).map((e=>{const[a,t]=e,i=n().cloneDeep(t);i.key=a,i.checked=!1;const[s,r,d]=i.weight;return i.weight={min:s,max:r,value:d},i}))},initBasic({Checkpoints:e,loraStyle:a,sdVae:t,imageSize:i,samplerMethod:s,samplerStep:r,CFGScale:n,clipSkip:d}){const l=Object.entries(e).map((e=>{const[a,t]=e;return t.key=a,t})),o=this.formatLoraStyle(a),m={Checkpoints:l,loraStyle:o,sdVae:t,imageSize:i,imageSizeCustom:{...this.getCustomImageSizeParams(i)},samplerMethod:s,samplerStep:{min:r[0]??1,max:r[1]??60},CFGScale:{min:n[0]??1,max:n[1]??30},clipSkip:{min:d[0]??1,max:d[1]??12}};this.basicOptions=m;const u=m.imageSize[this.basicFormTemp.size];this.setSdModel(l[0]??{}),this.basicForm.override_settings.sd_vae=t["default"],this.basicForm.width=u[0],this.basicForm.height=u[1],this.basicForm.sampler_index=s[0]??"",this.basicForm.num_samples=r[2]??1,this.basicForm.cfg_scale=n[2]??1,this.basicForm.clip_skip=d[2]??1},initHdrepaire({hrImageSize:e,hrUpscaler:a,hrSecondPassSteps:t,denoisingStrength:i}){const s={hrImageSize:e,hrUpscaler:a,hrSecondPassSteps:{min:t[0],max:t[1]},denoisingStrength:{min:i[0],max:i[1]},imageSizeCustom:{...this.getCustomImageSizeParams(e)}};this.hdrepaireOptions=s;const r=s.hrImageSize[this.hdrepaireForm.hr_scale];this.hdrepaireForm.hr_resize_x=r[0],this.hdrepaireForm.hr_resize_y=r[1],this.hdrepaireForm.hr_upscaler=a["default"],this.hdrepaireForm.hr_second_pass_steps=t[2],this.hdrepaireForm.denoising_strength=i[2]},initAdetailer({adModel:e,loraStyle:a,adConfidence:t,adMaskBlur:i,adDenoisingStrength:s}){const r=this.formatLoraStyle(a),n={adModel:e,loraStyle:r,adConfidence:{min:t[0],max:t[1]},adMaskBlur:{min:i[0],max:i[1]},adDenoisingStrength:{min:s[0],max:s[1]}};this.adetailerOptions=n,this.adetailerForm.ad_model=e["0"],this.adetailerForm.ad_confidence=t[2],this.adetailerForm.ad_dilate_erode=i[2],this.adetailerForm.ad_denoising_strength=s[2]},async load(){const{body:e}=await(0,i.R1)();this.initBasic(e),this.initHdrepaire(e),this.initAdetailer(e)},getCustomImageSizeParams(e){const a=e["Custom"]?e["Custom"]:e["custom"];return{minWidth:a[0],maxWidth:a[1],minHeight:a[2],maxHeight:a[3],defaultWidth:a[4],defaultHeight:a[5]}},setUploadImage(e){this.basicForm.init_images=e},setSdModel(e){this.basicFormTemp.sd_model_checkpoint_name=e.name,this.basicForm.override_settings.sd_model_checkpoint=e.key},getUploadImages(){return this.basicForm.init_images.map((async e=>{const{width:a,height:t,src:i}=await(0,s.I)(e.raw);let r="";return a&&(r=`图片大小 ${a}x${t}`),e.extra=r,e.url=i,e}))},hdSetUploadImage(e){this.hdrepaireForm.base_image=e},adSetUploadImage(e){this.adetailerForm.base_image=e},createImage(){let e={};switch(this.formType){case"hdrepaire":e={...this.hdrepaireForm};break;case"adetailer":e={...this.adetailerForm};break;case"basic":default:e={...this.basicForm},e.styles=e.styles.map((e=>{const a={name:e.key,weight:e.weight};return a})),e.init_images=e.init_images.map((e=>{const a=e.url;return a}));break}return(0,i.p$)(e)}}})},15592:function(e,a,t){function i(e){return new Promise(((a,t)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=function(){if(2==i.readyState){const e=new Image;e.src=i.result,e.onload=function(){const e={width:this.width,height:this.height,src:this.src};a(e)}}else t()}}))}function s(e){return e.replace(/data:.+?;base64,/,"")}t.d(a,{I:function(){return i},x:function(){return s}})},97280:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var i=t(66252);const s={class:"el-card el-upload-dragger list-item"},r={class:"list-item-meta"},n={class:"list-item-meta-avatar"},d={class:"list-item-meta-content"},l={class:"card-header"},o={class:"list-item-meta-action"};function m(e,a){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",r,[(0,i._)("div",n,[(0,i.WI)(e.$slots,"image",{},void 0,!0)]),(0,i._)("div",d,[(0,i._)("div",l,[(0,i.WI)(e.$slots,"header",{},void 0,!0)]),(0,i.WI)(e.$slots,"content",{},void 0,!0)]),(0,i._)("div",o,[(0,i.WI)(e.$slots,"action",{},void 0,!0)])])])}function u(e){e.__source="src/components/CardItem/index.vue"}var c=t(83744);const p={};"function"===typeof u&&u(p);const h=(0,c.Z)(p,[["render",m],["__scopeId","data-v-4186fb5a"]]);var g=h},92369:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var i=t(57018),s=(t(3241),t(74367),t(66252)),r=t(2262),n=t(3577),d=t(25498),l={__name:"index",props:{modelValue:{type:[Number,String],default:0},placeholder:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=(0,r.iH)(parseInt(t.modelValue));function o(){const e=parseInt(l.value);isNaN(e)?l.value=defaultVal:(l.value<t.min&&(l.value=t.min),l.value>t.max&&(l.value=t.max),a("update:modelValue",l.value))}(0,s.YP)((()=>t.modelValue),(()=>{l.value=parseInt(t.modelValue)}));const m=(0,s.Fl)((()=>""===l.value||(0,d.yH)(l.value)));return(a,t)=>{const d=i.EZ;return(0,s.wg)(),(0,s.j4)(d,{modelValue:(0,r.SU)(l),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,r.dq)(l)?l.value=e:null),modelModifiers:{number:!0},placeholder:e.placeholder,class:(0,n.C_)({"error-value":!(0,r.SU)(m)}),disabled:e.disabled,onChange:o},(0,s.Nv)({_:2},[a.$slots.prepend?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.WI)(a.$slots,"prepend")])),key:"0"}:void 0]),1032,["modelValue","placeholder","class","disabled"])}}};function o(e){e.__source="src/components/InputNumber/index.vue"}var m=t(83744);"function"===typeof o&&o(l);const u=(0,m.Z)(l,[["__scopeId","data-v-2685ef0d"]]);var c=u},29559:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var i=t(47223),s=(t(3241),t(96624),t(14132)),r=(t(50986),t(61715),t(20129)),n=(t(69840),t(6589),t(61046)),d=(t(19414),t(66252)),l=t(2262),o=t(97280),m=t(18594),u=t(91222),c=t(47720);const p=e=>((0,d.dD)("data-v-edfc5982"),e=e(),(0,d.Cn)(),e),h={class:"HDRepaireFrom"},g={key:1,class:"el-card el-upload-dragger list-item"},_=p((()=>(0,d._)("div",{class:"list-item-meta"},[(0,d._)("div",{class:"list-item-meta-content-left"},[(0,d._)("ul",null,[(0,d._)("li",null,"请从任务列表选择想要操作的图片"),(0,d._)("li",null,"点击图片上的 (高清修复) 按钮")])])],-1))),v=[_],b={class:"txt2imgFrom"};var f={__name:"hdrepaire",setup(e){const a=(0,u.m)(),{hdrepaireForm:t,hdrepaireOptions:p,isHdrepaireCustomImageSize:_}=(0,c.Jk)(a),{hdSetUploadImage:f}=a;return(e,a)=>{const u=n.F8,c=(0,d.up)("vab-icon"),S=r.nH,w=r.ly,y=s.BT,k=s.ElSelect,z=i.BM;return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("div",h,[(0,d.Wm)(w,{"label-position":"top","label-width":"100px"},{default:(0,d.w5)((()=>[(0,d.Wm)(S,{label:"基础图片"},{default:(0,d.w5)((()=>[(0,l.SU)(t).base_image.url?((0,d.wg)(),(0,d.j4)((0,l.SU)(o["default"]),{key:0},{image:(0,d.w5)((()=>[(0,d.Wm)(u,{src:(0,l.SU)(t).base_image.url,width:"48"},null,8,["src"])])),action:(0,d.w5)((()=>[(0,d.Wm)(c,{icon:"delete-bin-6-line",class:"cursor-pointer",style:{color:"var(--el-color-danger)"},onClick:a[0]||(a[0]=e=>(0,l.SU)(f)({}))})])),_:1})):((0,d.wg)(),(0,d.iD)("div",g,v))])),_:1})])),_:1})]),(0,d._)("div",b,[(0,d.Wm)(w,{"label-position":"top","label-width":"100px"},{default:(0,d.w5)((()=>[(0,d.Wm)(S,{label:"放大倍数"},{default:(0,d.w5)((()=>[(0,d.Wm)((0,l.SU)(m["default"]),{size:(0,l.SU)(t).hr_scale,"onUpdate:size":a[1]||(a[1]=e=>(0,l.SU)(t).hr_scale=e),width:(0,l.SU)(t).hr_resize_x,"onUpdate:width":a[2]||(a[2]=e=>(0,l.SU)(t).hr_resize_x=e),height:(0,l.SU)(t).hr_resize_y,"onUpdate:height":a[3]||(a[3]=e=>(0,l.SU)(t).hr_resize_y=e),"image-size":(0,l.SU)(p).hrImageSize,"image-size-custom":(0,l.SU)(p).imageSizeCustom,disabled:!(0,l.SU)(_)},null,8,["size","width","height","image-size","image-size-custom","disabled"])])),_:1}),(0,d.Wm)(S,{label:"修复方式"},{default:(0,d.w5)((()=>[(0,d.Wm)(k,{modelValue:(0,l.SU)(t).hr_upscaler,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,l.SU)(t).hr_upscaler=e),clearable:""},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,l.SU)(p).hrUpscaler,(e=>((0,d.wg)(),(0,d.j4)(y,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,d.Wm)(S,{label:"高清采样次数"},{default:(0,d.w5)((()=>[(0,d.Wm)(z,{modelValue:(0,l.SU)(t).hr_second_pass_steps,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,l.SU)(t).hr_second_pass_steps=e),min:(0,l.SU)(p).hrSecondPassSteps.min,max:(0,l.SU)(p).hrSecondPassSteps.max},null,8,["modelValue","min","max"])])),_:1}),(0,d.Wm)(S,{label:"重绘幅度"},{default:(0,d.w5)((()=>[(0,d.Wm)(z,{modelValue:(0,l.SU)(t).denoising_strength,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,l.SU)(t).denoising_strength=e),min:(0,l.SU)(p).denoisingStrength.min,max:(0,l.SU)(p).denoisingStrength.max,step:.1},null,8,["modelValue","min","max"])])),_:1})])),_:1})])],64)}}};function S(e){e.__source="src/views/stablediffusion/components/hdrepaire.vue"}var w=t(83744);"function"===typeof S&&S(f);const y=(0,w.Z)(f,[["__scopeId","data-v-edfc5982"]]);var k=y},18594:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var i=t(73632),s=(t(3241),t(74965),t(22040)),r=(t(99426),t(87692)),n=(t(45393),t(22411),t(66252)),d=t(2262),l=t(3577),o=t(92369);const m={key:0},u={key:1},c={class:"widthAndHeightInput"};var p={__name:"image_size",props:{imageSize:{type:Object,default:()=>{}},size:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},imageSizeCustom:{type:Object,default:()=>{}},disabled:{type:Boolean,default:!1}},emits:["update:size","update:width","update:height"],setup(e,{emit:a}){const t=e,p=(0,d.iH)(t.size);async function h(e){a("update:width",e)}async function g(e){a("update:height",e)}function _(){const e=p.value;if("custom"===e.toLowerCase())a("update:width",t.imageSizeCustom.defaultWidth),a("update:height",t.imageSizeCustom.defaultHeight);else{const i=t.imageSize[e];a("update:width",i[0]),a("update:height",i[1])}a("update:size",e)}return(a,t)=>{const v=r.dn,b=r.KD,f=s.Dv,S=i.dq;return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,[(0,n.Wm)(b,{modelValue:(0,d.SU)(p),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,d.dq)(p)?p.value=e:null),size:"large",onChange:_},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.imageSize,((e,a)=>((0,n.wg)(),(0,n.j4)(v,{key:a,label:a},{default:(0,n.w5)((()=>[2===e.length?((0,n.wg)(),(0,n.iD)("div",m,(0,l.zw)(`${e[0]} * ${e[1]}`),1)):(0,n.kq)("",!0),e.length>2?((0,n.wg)(),(0,n.iD)("div",u,"自定义")):(0,n.kq)("",!0)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,n._)("div",c,[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)((0,d.SU)(o["default"]),{value:e.width,placeholder:"请输入生图的宽度",min:e.imageSizeCustom.minWidth,max:e.imageSizeCustom.maxWidth,disabled:e.disabled,"onUpdate:modelValue":h},{prepend:(0,n.w5)((()=>[(0,n.Uk)("宽度")])),_:1},8,["value","min","max","disabled"])])),_:1}),(0,n.Wm)(f,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)((0,d.SU)(o["default"]),{value:e.height,placeholder:"请输入生图的高度",min:e.imageSizeCustom.minHeight,max:e.imageSizeCustom.maxHeight,disabled:e.disabled,"onUpdate:modelValue":g},{prepend:(0,n.w5)((()=>[(0,n.Uk)("高度")])),_:1},8,["value","min","max","disabled"])])),_:1})])),_:1})])],64)}}};function h(e){e.__source="src/views/stablediffusion/components/image_size.vue"}"function"===typeof h&&h(p);const g=p;var _=g}}]);