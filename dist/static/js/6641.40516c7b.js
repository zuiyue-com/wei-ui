/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-10-19 19:31:27
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[6641,6632],{36632:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=a(10661),o=(a(3241),a(35095),a(14181)),n=(a(33828),a(66252)),s=a(2262),i=a(49963),c={__name:"index",props:{text:{type:String,default:""},tipText:{type:String,default:"拷贝生成信息"}},setup(e){const t=e,a=(0,s.qj)({tooltipText:t.tipText,tooltipStatus:!1});async function c(){try{await navigator.clipboard.writeText(t.text),a.tooltipText="已复制！"}catch(e){a.tooltipText="复制失败"}}function u(){a.tooltipStatus=!0,a.tooltipText=t.tipText,setTimeout((()=>{a.tooltipStatus=!1}),200)}return(e,t)=>{const d=(0,n.up)("DocumentCopy"),m=o.gn,r=l.Q0;return(0,n.wg)(),(0,n.j4)(r,{class:"box-item",effect:"dark",content:(0,s.SU)(a).tooltipText,disabled:(0,s.SU)(a).tooltipStatus,placement:"top"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{style:{color:"var(--el-color-success)"},class:"cursor-pointer",onClick:(0,i.iM)(c,["stop"]),onMouseleave:(0,i.iM)(u,["stop"])},{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1},8,["onClick","onMouseleave"])])),_:1},8,["content","disabled"])}}};function u(e){e.__source="src/components/ClipboardTips/index.vue"}"function"===typeof u&&u(c);const d=c;var m=d},26209:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var l=a(16273),o=a(35756),n=(a(3241),a(19414),a(63715)),s=(a(5508),a(91194)),i=(a(2993),a(32590),a(10661)),c=(a(35095),a(14181)),u=(a(33828),a(57658),a(66252)),d=a(3577),m=a(2262),r=a(91222),p=a(17052),f=a(33729),g=a.n(f),w=a(22201);const _={class:"taskqueue-card-body"},k={class:"taskqueue-tag-group"},v={class:"taskqueue-folow"},y={class:"taskqueue-image-group"},W={class:"taskqueue-image"};var b={__name:"index",props:{imageItem:{type:Object,default:()=>{}},images:{type:Array,default:()=>[]},redirect:{type:Boolean,default:!1}},emits:["topic"],setup(e,{emit:t}){const a=e,f=(0,w.tv)(),b=(0,u.Fl)((()=>a.imageItem)),x=(0,r.m)(),{getImageDetailResetParams:h,setFormType:S,setUploadImage:U,hdSetUploadImage:I,adSetUploadImage:C}=x;function D(){a.redirect&&f.push("/sd/create")}async function q(e){D(),h(e.picid),S("basic"),(0,p.D8)()}async function M(e){D(),U([{...e}]),S("basic"),(0,p.D8)()}async function T(e){D(),I(e),S("hdrepaire"),(0,p.D8)()}async function j(e){D(),C(e),S("adetailer"),(0,p.D8)()}function F(e){t("topic",e)}function V(e){e.replace(/(.*\/)*([^.]+\.\w+).*/gi,"$2");g()(e)}return(t,a)=>{const r=(0,u.up)("PictureRounded"),p=c.gn,f=i.Q0,g=(0,u.up)("Picture"),w=(0,u.up)("Edit"),x=(0,u.up)("EditPen"),h=s.QQ,S=s.Lf,U=(0,u.up)("Share"),I=(0,u.up)("Download"),C=n.ElCheckbox,D=o.F8,z=l.Z;return(0,u.wg)(),(0,u.j4)(z,{"body-style":{padding:"0px"},shadow:"hover"},{default:(0,u.w5)((()=>[(0,u._)("div",_,[(0,u._)("div",{class:(0,d.C_)(["taskqueue-mask",{"taskqueue-checked":e.imageItem.checked}])},[(0,u._)("div",k,[(0,u.Wm)(S,{style:{width:"100%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(h,null,{default:(0,u.w5)((()=>[(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"重绘",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[0]||(a[0]=t=>q(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(r)])),_:1})])),_:1}),(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"图生图",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[1]||(a[1]=t=>M(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(g)])),_:1})])),_:1}),(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"高清修复",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[2]||(a[2]=t=>T(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(w)])),_:1})])),_:1}),(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"脸部修复",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[3]||(a[3]=t=>j(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(x)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,u._)("div",v,[(0,u.Wm)(S,{style:{width:"100%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(h,null,{default:(0,u.w5)((()=>[(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"分享",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[4]||(a[4]=t=>F(e.imageItem.bigimg))},{default:(0,u.w5)((()=>[(0,u.Wm)(U)])),_:1})])),_:1}),(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"下载",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[5]||(a[5]=t=>V(e.imageItem.bigimg))},{default:(0,u.w5)((()=>[(0,u.Wm)(I)])),_:1})])),_:1}),(0,u.Wm)(f,{class:"box-item",effect:"dark",content:"选中批量下载和分享",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(C,{modelValue:(0,m.SU)(b).checked,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,m.SU)(b).checked=e),label:"",size:"large"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])],2),(0,u._)("div",y,[(0,u._)("div",W,[(0,u.Wm)(D,{src:e.imageItem.bigimg,"zoom-rate":1.1,"preview-src-list":e.images,"initial-index":0,"hide-on-click-modal":!0,fit:"contain"},null,8,["src","preview-src-list"])])])])])),_:1})}}};function x(e){e.__source="src/components/ImageItem/index.vue"}var h=a(83744);"function"===typeof x&&x(b);const S=(0,h.Z)(b,[["__scopeId","data-v-6d7eaea8"]]);var U=S},26280:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(4350),o=(a(3241),a(91103),a(31452)),n=(a(68445),a(66252)),s=a(3577),i=a(2262);const c={class:"wrap aligin-center"},u={key:0,class:"loading"},d={key:2};var m={__name:"index",props:{status:{type:String,default:"loadmore"}},emits:["loadmore"],setup(e,{emit:t}){const a=e,m=(0,n.Fl)((()=>{let e="";switch(a.status){case"loadmore":e="更多";break;case"loading":e="加载中";break;case"nomore":e="没有数据了";break}return e}));function r(){t("loadmore")}return(t,a)=>{const p=o.E2,f=l.t;return(0,n.wg)(),(0,n.iD)("div",c,["loading"==e.status?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",u,null,512)),[[f,!0]]):(0,n.kq)("",!0),"loadmore"==e.status?((0,n.wg)(),(0,n.j4)(p,{key:1,type:"primary",onClick:r},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)((0,i.SU)(m)),1)])),_:1})):((0,n.wg)(),(0,n.iD)("span",d,(0,s.zw)((0,i.SU)(m)),1))])}}};function r(e){e.__source="src/components/LoadMore/index.vue"}var p=a(83744);"function"===typeof r&&r(m);const f=(0,p.Z)(m,[["__scopeId","data-v-300dc6ea"]]);var g=f},26641:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var l=a(65450),o=(a(3241),a(69998),a(16273)),n=a(32018),s=(a(46160),a(73632)),i=(a(74965),a(22040)),c=(a(99426),a(83396)),u=(a(48157),a(74741),a(91194)),d=(a(2993),a(15659)),m=(a(79987),a(10444),a(14181)),r=(a(33828),a(10661)),p=(a(35095),a(85381)),f=(a(68538),a(32590),a(66252)),g=a(2262),w=a(3577),_=a(49963),k=a(36632),v=a(26209),y=a(26280),W=a(70299),b=a(40645),x=a(91222),h=a(95244),S=(a(17052),a(33729)),U=a.n(S),I=a(47720);const C={class:"taskqueue-container"},D=["infinite-scroll-disabled"],q={style:{"margin-left":"8px"}},M={class:"taskqueue-card-body"},T={class:"taskqueue-image-group"},j={class:"taskqueue-image",justify:"center"},F={class:"percentage-value"},V={class:"percentage-label"};var z={__name:"taskqueue",setup(e){const t=(0,f.f3)("$baseConfirm"),a=(0,f.f3)("$baseMessage"),S=(0,b.s)(),z=(0,x.m)(),{getTasks:E,getTasksCheckedImages:Q,hasNoMoreData:P}=(0,I.Jk)(S),{setFormType:R,setUploadImage:Z,hdSetUploadImage:L,adSetUploadImage:Y,setFormData:B,getImageDetailResetParams:H}=z,K=(0,g.qj)({accordion:!1,shareFormRef:null,loadMoreStatus:"loading"}),{accordion:O,shareFormRef:$,loadMoreStatus:X}=(0,g.BK)(K),A=e=>{const t=e?["1"]:[];E.value.map((e=>e.collapse=t))},J=(0,f.Fl)((()=>"loading"===X.value||"nomore"===X.value));async function N(){P.value||(K.loadMoreStatus="loading",await S.loadMore(),(0,f.Y3)((()=>{K.loadMoreStatus=P.value?"nomore":"loadmore"})))}async function G(e){t("你确定要删除当前任务吗",null,(async()=>{const{msg:t}=await(0,h._5)(e.ms_id);a(t,"success","vab-hey-message-success"),S.load()}))}function ee(){Q.value.forEach((e=>{U()(e.bigimg)})),S.resetImagesCheck()}async function te(){const e=Q.value.map((e=>e.bigimg));$.value.showDialog(e)}async function ae(e){$.value.showDialog([e])}return(0,f.bv)((async()=>{K.loadMoreStatus="loading",await S.load(),(0,f.Y3)((()=>{K.loadMoreStatus=P.value?"nomore":"loadmore"}))})),(e,t)=>{const a=u.QQ,b=p.OX,x=r.Q0,h=(0,f.up)("Download"),S=m.gn,U=d.ElButton,I=(0,f.up)("Share"),z=d.MO,P=u.Lf,R=(0,f.up)("Delete"),Z=c.aE,L=c.PH,Y=i.Dv,B=s.dq,H=n.Xh,K=o.Z,le=l.n;return(0,f.wg)(),(0,f.iD)("div",C,[(0,f.Wm)(P,{class:"margin-top",column:2},{default:(0,f.w5)((()=>[(0,f.Wm)(a,{label:"任务队列"}),(0,f.Wm)(a,{label:"","label-align":"right",align:"right"},{default:(0,f.w5)((()=>[(0,f.Wm)(x,{class:"box-item",effect:"dark",content:"折叠图片生成信息",placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(b,{modelValue:(0,g.SU)(O),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,g.dq)(O)?O.value=e:null),"inline-prompt":"",style:{"--el-switch-on-color":"var(--el-color-primary)","--el-switch-off-color":"var(--el-color-grey)"},"active-text":"显示","inactive-text":"隐藏",onChange:A},null,8,["modelValue"])])),_:1}),(0,f.Wm)(z,{class:"ml-4"},{default:(0,f.w5)((()=>[(0,f.Wm)(x,{class:"box-item",effect:"dark",content:"在任务列表中选择图片后点击此按钮可批量下载",placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(U,{type:"default",text:"",disabled:0===(0,g.SU)(Q).length,onClick:ee},{default:(0,f.w5)((()=>[(0,f.Wm)(S,null,{default:(0,f.w5)((()=>[(0,f.Wm)(h)])),_:1}),(0,f.Uk)(" 下载 ")])),_:1},8,["disabled"])])),_:1}),(0,f.Wm)(x,{class:"box-item",effect:"dark",content:"在任务列表中选择图片后点击此按钮可把选择的图片发帖，分享出去",placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(U,{text:"",disabled:0===(0,g.SU)(Q).length,onClick:te},{default:(0,f.w5)((()=>[(0,f.Wm)(S,null,{default:(0,f.w5)((()=>[(0,f.Wm)(I)])),_:1}),(0,f.Uk)(" 分享 ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",{"infinite-scroll-disabled":(0,g.SU)(J),class:"scrollbar"},[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)((0,g.SU)(E),(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.ms_id},[(0,f.Wm)(L,{modelValue:e.collapse,"onUpdate:modelValue":t=>e.collapse=t},{default:(0,f.w5)((()=>[(0,f.Wm)(Z,{name:"1"},{title:(0,f.w5)((()=>[(0,f.Uk)((0,w.zw)(e.created_at)+" ",1),(0,f._)("i",q,(0,w.zw)(e.expired_at),1),(0,f.Wm)((0,g.SU)(k["default"]),{text:e.log},null,8,["text"]),(0,f.Wm)(x,{class:"box-item",effect:"dark",content:"删除任务",placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(S,{style:{color:"var(--el-color-danger)"},onClick:(0,_.iM)((t=>G(e)),["stop"])},{default:(0,f.w5)((()=>[(0,f.Wm)(R)])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,f.w5)((()=>[(0,f._)("div",null,(0,w.zw)(e.log),1)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),e.ms_state>=100?((0,f.wg)(),(0,f.j4)(B,{key:0,gutter:16,span:"24",justify:"start"},{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.imagelist,(t=>((0,f.wg)(),(0,f.j4)(Y,{key:t.picid,xs:24,sm:12,md:6,lg:6,xl:4},{default:(0,f.w5)((()=>[(0,f.Wm)((0,g.SU)(v["default"]),{"image-item":t,images:e.images,onTopic:ae},null,8,["image-item","images"])])),_:2},1024)))),128))])),_:2},1024)):((0,f.wg)(),(0,f.j4)(B,{key:1,gutter:16},{default:(0,f.w5)((()=>[(0,f.Wm)(Y,{xs:24,sm:12,md:6,lg:6,xl:4},{default:(0,f.w5)((()=>[(0,f.Wm)(K,{"body-style":{padding:"0px"},shadow:"hover"},{default:(0,f.w5)((()=>[(0,f._)("div",M,[(0,f._)("div",T,[(0,f._)("div",j,[(0,f.Wm)(H,{type:"dashboard",percentage:e.ms_state},{default:(0,f.w5)((({percentage:e})=>[(0,f._)("span",F,(0,w.zw)(e)+"%",1),(0,f._)("span",V,(0,w.zw)(0===e?"进行中":"正在生成"),1)])),_:2},1032,["percentage"])])])])])),_:2},1024)])),_:2},1024)])),_:2},1024))])))),128)),(0,f.Wm)((0,g.SU)(y["default"]),{status:(0,g.SU)(X),onLoadmore:N},null,8,["status"])],8,D)),[[le,N]]),(0,f.Wm)((0,g.SU)(W["default"]),{ref_key:"shareFormRef",ref:$},null,512)])}}};function E(e){e.__source="src/views/stablediffusion/components/taskqueue.vue"}var Q=a(83744);"function"===typeof E&&E(z);const P=(0,Q.Z)(z,[["__scopeId","data-v-0d4423cc"]]);var R=P}}]);