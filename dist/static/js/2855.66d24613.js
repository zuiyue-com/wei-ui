/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-09-28 17:16:01
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[2855],{17454:function(e,t,s){s.d(t,{m:function(){return r}});s(57658);var i=s(52806);function a(){return(0,i.Z)({url:"/wwwapi.php?to=sd&modac=formbase",method:"get"})}var o=s(15592),n=s(47720);const r=(0,n.Q_)("imageModel",{state:()=>({basicFormTemp:{sd_model_checkpoint_name:"",size:"Portrait",init_images:[]},basicForm:{taskType:"txt2img",override_settings:{sd_model_checkpoint:"",sd_vae:"animevae.pt"},styles:[],prompt_words:"",negative_prompt_words:"",init_images:[],width:128,height:1536,sampler_index:0,num_samples:20,cfg_scale:7,seed:-1,clip_skip:12,ensd:31337,batch_size:1},basicOptions:{Checkpoints:[],loraStyle:[],sdVae:{},imageSize:{},imageSizeCustom:{},samplerMethod:[],samplerStep:{},CFGScale:{},clipSkip:{}},fixForm:{model:1,times:0,range:0,zoom:"1x",width:512,height:768},fixModes:[],fixZooms:[],detailerForm:{model:1,loras:[],keyword:"",re_keyword:"",level:.5,mask:4,noise:.25,only_mask:!0},detailerModels:[]}),getters:{isCustomImageSize(e){return"Custom"===e.basicFormTemp.size},hasUploadedImage(e){return e.basicFormTemp.init_images.length>0},checkedLoraStyles(){return this.basicOptions.loraStyle.filter((e=>e.checked))},checkedLoraStylesLength(){return this.checkedLoraStyles.length}},actions:{async load(){const{body:{Checkpoints:e,loraStyle:t,sdVae:s,imageSize:i,samplerMethod:o,samplerStep:n,CFGScale:r,clipSkip:c}}=await a(),m=Object.entries(e).map((e=>{const[t,s]=e;return s.key=t,s})),d=Object.entries(t).map((e=>{const[t,s]=e;s.key=t,s.checked=!1;const[i,a,o]=s.weight;return s.weight={min:i,max:a,value:o},s})),{basicForm:l}=this;l.num_samples=n[2]??1,l.cfg_scale=r[2]??1,l.clip_skip=c[2]??1,this.setSdModel(m[0]??{});const h={Checkpoints:m,loraStyle:d,sdVae:s,imageSize:i,samplerMethod:o,samplerStep:{min:n[0]??1,max:n[1]??60},CFGScale:{min:r[0]??1,max:r[1]??30},clipSkip:{min:c[0]??1,max:c[1]??12}};this.basicOptions=h,this.setCustomImageSizeParams(i)},setCustomImageSizeParams(e){const t=e["Custom"];this.basicOptions.imageSizeCustom={minWidth:t[0],maxWidth:t[1],minHeight:t[2],maxHeight:t[3],defaultWidth:t[4],defaultHeight:t[5]},this.changeImageSize()},changeImageSize(){const{basicFormTemp:e,basicForm:t,basicOptions:s,isCustomImageSize:i}=this;if(i)t.width=s.imageSizeCustom.defaultWidth,t.height=s.imageSizeCustom.defaultHeight;else{const i=s.imageSize[e.size];t.width=i[0],t.height=i[1]}},resetLoraStyleSelectStatus(){this.checkedLoraStyles.filter((e=>e.checked=!1))},setUploadImage(e){this.basicForm.init_images=e},setSdModel(e){this.basicFormTemp.sd_model_checkpoint_name=e.name,this.basicForm.override_settings.sd_model_checkpoint=e.key},addLoraStyle(e){const t=this.basicForm.styles.findIndex((t=>t.key===e.key));return!(t>=0)&&(this.basicForm.styles.push({pic:e.pic,name:e.name,key:e.key,weight:e.weight.value,min:e.weight.min,max:e.weight.max}),!0)},removeLoraStyle(e){const t=this.basicForm.styles.findIndex((t=>t.key===e));return t>=0&&(this.basicForm.styles.splice(t,1),!0)},getUploadImages(){return this.basicForm.init_images.map((async e=>{const{width:t,height:s,src:i}=await(0,o.I)(e.raw);let a="";return t&&(a=`图片大小 ${t}x${s}`),e.extra=a,e.url=i,e}))},createImage(){const e={...this.basicForm};e.styles=e.styles.map((e=>{const t={name:e.key,weight:e.weight};return t})),e.init_images=e.init_images.map((e=>{const t=e.url;return t})),console.log(JSON.stringify(this.basicForm)),console.log(JSON.stringify(e))}}})},15592:function(e,t,s){function i(e){return new Promise(((t,s)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=function(){if(2==i.readyState){const e=new Image;e.src=i.result,e.onload=function(){const e={width:this.width,height:this.height,src:this.src};t(e)}}else s()}}))}function a(e){return e.replace(/data:.+?;base64,/,"")}s.d(t,{I:function(){return i},x:function(){return a}})},16273:function(e,t,s){s.d(t,{Z:function(){return u}});var i=s(30032),a=(s(3241),s(91154),s(97830)),o=(s(13768),s(66252)),n=s(2262),r=s(3577),c=s(22201),m=(0,o.aZ)({__name:"index",props:{header:{type:String,default:""},bodyStyle:{type:Object,default:()=>({})},shadow:{type:String,default:""},skeleton:{type:Boolean,default:!1},skeletonRows:{type:Number,default:4}},setup(e){let t=null;const s=(0,n.iH)(!0);return t=setTimeout((()=>{s.value=!1}),500),(0,c.iS)(((e,s,i)=>{clearInterval(t),i()})),(t,c)=>{const m=a.vk,d=i.Kf;return(0,o.wg)(),(0,o.j4)(d,{"body-style":e.bodyStyle,class:"vab-card",shadow:e.shadow},(0,o.Nv)({default:(0,o.w5)((()=>[e.skeleton?((0,o.wg)(),(0,o.j4)(m,{key:0,animated:"",loading:(0,n.SU)(s),rows:e.skeletonRows},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default",{class:"vab-card-transition"})])),_:3},8,["loading","rows"])):(0,o.WI)(t.$slots,"default",{key:1,class:"vab-card-transition"})])),_:2},[t.$slots.header||e.header?{name:"header",fn:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"header",{},(()=>[(0,o.Uk)((0,r.zw)(e.header),1)]))])),key:"0"}:void 0]),1032,["body-style","shadow"])}}});function d(e){e.__source="library/components/VabCard/index.vue"}var l=s(83744);"function"===typeof d&&d(m);const h=(0,l.Z)(m,[["__scopeId","data-v-391150ea"]]);var u=h},12855:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var i=s(16273),a=s(10661),o=(s(3241),s(35095),s(86398)),n=(s(69448),s(61046)),r=(s(19414),s(66252)),c=s(3577),m=s(17454);const d={class:"model-draw-card-body"},l={class:"model-draw-image-group"},h={key:0,class:"model-draw-description-select"},u={key:1,class:"model-draw-description"};var p={__name:"mini",props:{item:{type:Object,default:()=>{}},zoom:{type:Boolean,default:!1}},setup(e){(0,m.m)();return(t,s)=>{const m=n.F8,p=o.gi,g=a.Q0,y=i.Z;return(0,r.wg)(),(0,r.j4)(y,{"body-style":{padding:"0px"},shadow:"hover",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r._)("div",l,[(0,r._)("div",{class:(0,c.C_)(["model-draw-image",{"image-zoom":e.zoom}])},[(0,r.Wm)(m,{src:"http://120.232.127.22/sd/forum/threadcover/d6/7d/39.jpg"})],2),e.item.checked?((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)(g,{class:"box-item",effect:"dark",content:e.item.name,placement:"top"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{truncated:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,c.zw)(e.item.name),1)])),_:1})])),_:1},8,["content"])])):((0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(p,{truncated:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,c.zw)(e.item.name),1)])),_:1})]))])])])),_:1})}}};function g(e){e.__source="src/components/CardItem/mini.vue"}var y=s(83744);"function"===typeof g&&g(p);const f=(0,y.Z)(p,[["__scopeId","data-v-0b82d524"]]);var w=f}}]);